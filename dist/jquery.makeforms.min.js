/*! makeforms - v0.0.3 - 2013-10-24
* https://github.com/lambda2/MakeForms
* Copyright (c) 2013 Andr√© Aubin; Licensed Apache 2 */
(function(e){e.fn.makeForms=function(t){var o,n,i,p,a,r,l,s,m;t=e.extend({components:{},groupSize:1,selectMinSize:18,position:"before",templates:{}},t),t.templates=e.extend({item:"{{item}}",title:"<p>{{title}}</p>",group:"{{group}}",label:'<label for="{{id}}">{{label}}</label>',radio:'<input type="radio" name="{{name}}"                id="{{id}}" value="{{value}}">',text:'<input type="text" name="{{name}}"	id="{{id}}" value="{{value}}">',input:'<input type="{{type}}" name="{{name}}"	id="{{id}}" value="{{value}}">',select:'<select id="{{id}}" name="{{name}}">{{options}}</select>',option:'<option id="{{id}}" value="{{value}}">{{label}}</option>'},t.templates);var u=function(e,t){var o,n;o=e;for(n in t)-1!==o.search("{{"+n+"}}")&&t.hasOwnProperty(n)&&(o=o.replace("{{"+n+"}}",t[n]),o=u(o,t));return o},c=function(e){var t,o;t=0;for(o in e)t+=1;return t},h=function(e){var o,n;return e.hasOwnProperty("type")?o=e.type:(n=c(e.choices),o=1>=n?"text":t.selectMinSize>n?"radio":"option"),o};a=[],r=[],l=c(t.components),p=e(this),i=0;for(o in t.components){var f,d,v,y,b,g;g="",b="",m="",f=o,d=t.components[o].label,v=h(t.components[o]),y=t.templates[v],m=t.templates.group,t.components[o].hasOwnProperty("title")&&(t.components[o].hasOwnProperty("beforeTitle")&&(b+=t.components[o].beforeTitle),b+=u(t.templates.title,{title:t.components[o].title}),t.components[o].hasOwnProperty("afterTitle")&&(b+=t.components[o].afterTitle),a.push(b)),i+=1;for(n in t.components[o].choices){var w,O,P,z,S,j;w=t.components[o].choices[n],j=w.hasOwnProperty("type")?t.templates[w.type]:y,O=f+"_"+n,P=t.templates.label,z="option"!==v&&"radio"!==v?u(P,{label:w.label,id:O}):"",w.hasOwnProperty("value")||(w.value=n),S=u(j,{name:f,id:O,value:w.value,label:w.label}),w.hasOwnProperty("before")&&(S=w.before+S),w.hasOwnProperty("after")&&(S+=w.after),g=g+z+S}"option"===v&&(g=u(t.templates.select,{name:f,id:f,options:g})),a.push(g),g="",0===t.groupSize||0!==i%t.groupSize&&i!==l||(s=u(m,{group:a.join("\n")}),r.push(s),t.groupSize>0&&(a=[]))}return 0===t.groupSize&&(s=u(m,{group:a.join("\n")}),r.push(s)),"before"===t.position?p.html(r.join("\n")+p.html()):"after"===t.position?p.html(p.html()+r.join("\n")):p.html(r.join("\n")),this}})(jQuery);
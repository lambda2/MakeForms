/*! makeforms - v0.0.3 - 2013-11-07
* https://github.com/lambda2/MakeForms
* Copyright (c) 2013 Andr√© Aubin; Licensed Apache 2 */
(function(e){e.fn.makeForms=function(t){var o,n,a,r,i,l,p,s;t=e.extend({components:{},groupSize:1,selectMinSize:18,position:"before",templates:{}},t),t.templates=e.extend({item:"{{item}}",title:"<p>{{title}}</p>",group:"{{group}}",item_group:"<div class='item-group'>{{items}}</div>",label:'<label for="{{id}}">{{label}}</label>',radio:'<label for="{{id}}"><input type="radio" name="{{name}}"	id="{{id}}" value="{{value}}">{{label}}</label>',text:'<input type="text" name="{{name}}"	id="{{id}}" value="{{value}}">',input:'<input type="{{type}}" name="{{name}}"	id="{{id}}" value="{{value}}">',select:'<select id="{{id}}" name="{{name}}">{{options}}</select>',option:'<option id="{{id}}" value="{{value}}">{{label}}</option>'},t.templates);var u=function(e,t){var o,n;o=e;for(n in t)-1!==o.search("{{"+n+"}}")&&t.hasOwnProperty(n)&&(o=o.replace("{{"+n+"}}",t[n]),o=u(o,t));return o},m=function(e){var t,o;t=0;for(o in e)t+=1;return t},c=function(e){var o,n;return e.hasOwnProperty("type")?o=e.type:(n=m(e.choices),o=1>=n?"text":t.selectMinSize>n?"radio":"option"),o},f=function(e,o,n,a){var r,i="";for(r in e){var l,p,s,m,c,f;"group"!==r&&(l=e[r],f=l.hasOwnProperty("type")?t.templates[l.type]:y,p=o+"_"+a+"_"+r,s=t.templates.label,m="option"!==n&&"radio"!==n?u(s,{label:l.label,id:p}):"",l.hasOwnProperty("value")||(l.value=a+"_"+r),c=u(f,{name:o,id:p,value:l.value,label:l.label}),l.hasOwnProperty("before")&&(c=l.before+c),l.hasOwnProperty("after")&&(c+=l.after),i=i+m+c)}return i},v=function(e,o,n,a){var r,i=!1;for(r in e){var l,p,s,m,c,v;if(l=e[r],i=l.group,i!==!0)v=l.hasOwnProperty("type")?t.templates[l.type]:y,p=o+"_"+r,s=t.templates.label,m="option"!==a&&"radio"!==a?u(s,{label:l.label,id:p}):"",l.hasOwnProperty("value")||(l.value=r),c=u(v,{name:o,id:p,value:l.value,label:l.label}),l.hasOwnProperty("before")&&(c=l.before+c),l.hasOwnProperty("after")&&(c+=l.after),w=w+m+c;else if(i===!0){var b="",h=f(l,o,a,r);b+=h,w+=u(t.templates.item_group,{items:b})}}return w};r=[],i=[],l=m(t.components),a=e(this),n=0;for(o in t.components){var b,h,d,y,g,w;w="",g="",s="",b=o,h=t.components[o].label,d=c(t.components[o]),y=t.templates[d],s=t.templates.group,t.components[o].hasOwnProperty("title")&&(t.components[o].hasOwnProperty("beforeTitle")&&(g+=t.components[o].beforeTitle),g+=u(t.templates.title,{title:t.components[o].title}),t.components[o].hasOwnProperty("afterTitle")&&(g+=t.components[o].afterTitle),r.push(g)),n+=1,v(t.components[o].choices,b,h,d),"option"===d&&(w=u(t.templates.select,{name:b,id:b,options:w})),r.push(w),w="",0===t.groupSize||0!==n%t.groupSize&&n!==l||(p=u(s,{group:r.join("\n")}),i.push(p),t.groupSize>0&&(r=[]))}return 0===t.groupSize&&(p=u(s,{group:r.join("\n")}),i.push(p)),"before"===t.position?a.html(i.join("\n")+a.html()):"after"===t.position?a.html(a.html()+i.join("\n")):a.html(i.join("\n")),this}})(jQuery);